{% extends "base.html" %}

{% block pageheader %}Add CNAME record for {{ originating_record }}{% endblock pageheader %}

{% block body %}
<form class="form-horizontal" action="{% url "add_cname_result" %}" method="post">{% csrf_token %}
  <legend>Create CNAME record</legend>

  <div class="form-group{% if form_errors.dns_server %} has-error{% endif %}">
    <label for="dns_server" class="col-sm-3 control-label">DNS Server:</label>
    <div class="col-sm-5 col-md-4">
      <input id="dns_server" name="dns_server" type="text" class="form-control" value="{{dns_server.hostname}}" readonly="readonly" />
    </div>
    {% if form_errors.dns_server %}
    <div class="col-sm-4 col-md-5">
      <div class="alert alert-danger">
        {{ form_errors.dns_server|stringformat:"s"|striptags }}
        {% if form_data.dns_server %} Previous Value: {{ form_data.dns_server }}{% endif %}
      </div>
    </div>
    {% endif %}
  </div>

  <div class="form-group{% if form_errors.originating_record %} has-error{% endif %}">
    <label for="originating_record" class="col-sm-3 control-label">Originating Record: </label>
    <div class="col-sm-5 col-md-4">
      <input type="text" id="originating_record" name="originating_record" class="form-control" value="{{originating_record}}" readonly="readonly"/>
    </div>
    {% if form_errors.originating_record %}
    <div class="col-sm-4 col-md-5">
      <div class="alert alert-danger">
        {{ form_errors.originating_record|stringformat:"s"|striptags }}
        {% if form_data.originating_record %} Previous Value: {{ form_data.originating_record }}{% endif %}
      </div>
    </div>
    {% endif %}
  </div>

  <div class="form-group{% if form_errors.cname %} has-error{% endif %}">
    <label for="cname" class="col-sm-3 control-label">CNAME: </label>
    <div class="col-sm-5 col-md-4">
      <div class="input-group">
        <input id="cname" name="cname" type="text" class="form-control" />
        <span class="input-group-addon">.{{zone_name}}</span>
        <input type="hidden" name="zone_name" value="{{zone_name}}"/>
      </div>
    </div>
    {% if form_errors.cname  %}
    <div class="col-sm-4 col-md-5">
      <div class="alert alert-danger">
        CNAME: {{ form_errors.cname|stringformat:"s"|striptags }}
        {% if form_data.cnamr %} Previous Value: {{ form_data.cname }}{% endif %}
      </div>
    </div>
    {% endif %}
  </div>

  <div class="form-group{% if form_errors.ttl %} has-error{% endif %}">
    <label for="ttl" class="col-sm-3 control-label">TTL: </label>
    <div class="col-sm-5 col-md-4">
      <select id="ttl" name="ttl" class="form-control">
        {% for ttl, description in ttl_choices %}
        <option value="{{ttl}}">
        {{ttl}} ({{description}})
      </option>
        {% endfor %}
      </select>
    </div>
    {% if form_errors.ttl %}
    <div class="col-sm-4 col-md-5">
      <div class="alert alert-danger">
        {{ form_errors.ttl|stringformat:"s"|striptags }}
        {% if form_data.ttl %} Previous Value: {{ form_data.ttl }}{% endif %}
      </div>
    </div>
    {% endif %}
  </div>

  <div class="form-group{% if form_errors.key_name %} has-error{% endif %}">
    <label for="key_name" class="col-sm-3 control-label">TSIG Key:</label>
    <div class="col-sm-5 col-md-4">
      <select id="key_name" name="key_name" class="form-control">
        {% for key in tsig_keys %}
          <option value="{{key.id}}"{% if key == dns_server.default_transfer_key %} selected="selected"{% endif %}>{{key}}</option>
        {% empty %}
          <option selected="selected" value=""/>
        {% endfor %}
      </select>
    </div>
    {% if form_errors.key_name %}
    <div class="col-sm-4 col-md-5">
      <div class="alert alert-danger">
        {{ form_errors.key_name|stringformat:"s"|striptags }}
        {% if form_data.key_name %} Previous Value: {{ form_data.key_name }}{% endif %}
      </div>
    </div>
    {% endif %}
  </div>

  <div class="form-group">
    <div class="col-sm-3"></div>
    <div class="col-sm-5 col-md-4">
      <button type="submit" class="btn btn-default">Save Changes</button>
      <a href="{% url "zone_list" dns_server=dns_server zone_name=zone_name %}" class="btn btn-warning">Cancel</a>
    </div>
  </div>
</form>
{% endblock body %}
